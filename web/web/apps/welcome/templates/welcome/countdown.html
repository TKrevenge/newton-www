{% load i18n %}
{% load utils %}

{% if start_day %}
    <section id="start_test" class="section-list">
        <div class="container text-center">
            <div class="countdown-title">
                <h1>{% trans "TestNet is activated" %}</h1>
            </div>
            <div class="more" style="margin-top: 4%">
                    <a href="https://developer.newtonproject.org">{% trans "Go to TestNet" %}</a>
            </div>
        </div>
    </section>
{% else %}
    <section id="countdown" class="section-list">
    <div class="container text-center">
        <div class="countdown-title">
            <h1>{% trans "Countdown of the TestNet launch" %}</h1>
        </div>
        <div class="countdown-subtitle">
            <h3></h3>
        </div>
        <script>
        var delta_time = {{ delta_time|safe }}
        </script>
        <div id="tiles">
            <div id="time"><p>0</p></div>
            <div id="time"><p>0</p></div>
            <div id="time"><p>0</p></div>
            <div id="time"><p>0</p></div>
        </div>
        <div id="labels">
            <div id="time-label"><p>DAY</p></div>
            <div id="time-label"><p>HOUR</p></div>
            <div id="time-label"><p>MINUTE</p></div>
            <div id="time-label"><p>SECOND</p></div>
        </div>
    </div>
    </section>
{% endif %}



<script type="text/javascript">
$(function(){
    totalSeconds = delta_time;
    var days =0, hours=0, minutes=0,seconds=0,temp;
    var countdown = document.getElementById("tiles")
    if(countdown==null){return;}
    var html_pre = "<div id='time'><p>"
    var html_suffix = "</p></div>"
    getCountdown();
    var id = setInterval(function(){ getCountdown();}, 1000);
    function getCountdown(){
        // if(totalSeconds < 0){
        //     $("#join-test-button").addClass("join-test-button-enable")
        //     $("#join-test-button")[0].setAttribute("href","https://developer.newtonproject.org")
        //     return;
        // }
        days = formatTime(parseInt(totalSeconds / 86400));
        temp = totalSeconds % 86400;
        hours = formatTime(parseInt(temp/3600));
        temp = temp % 3600;
        minutes = formatTime(parseInt(temp/60));
        seconds = formatTime(parseInt(temp%60));
        countdown.innerHTML = html_pre+days+html_suffix+html_pre+hours+html_suffix+html_pre+minutes+html_suffix+html_pre+seconds+html_suffix;
        totalSeconds = totalSeconds - 1;
    }

    function formatTime(n){
        return (n < 10 ? '0': '') + n;
    }

});
</script>

