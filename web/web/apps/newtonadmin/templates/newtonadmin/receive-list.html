{% extends "newtonadmin/base.html" %}
{% load i18n %}
{% load utils %}

{% block title %}
{% trans "KYC Admin" %}
{% endblock %}

{% block extra %}
<meta http-equiv="refresh" content="60"/>  
{% endblock %}

{% block content %}
<section class="section-list newtonadmin">
    <div class="container">
        <h3>转币交易列表(每30分钟自动查询一次) &nbsp;(交易次数：{{ paginator.count }})</h3>
        {% include "newtonadmin/include-paginator.html" %}
        <div class="raw table-responsive">
            <table class="table">
                <thead>
                    <tr>
                        <th>电子邮箱</th>
                        <th>收币地址</th>
                        <th>币种</th>
                        <th>数量</th>
                        <th>时间</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in items %}
                    <tr>
                        <td>{{ item.user.email }}</td>
                        <td>
                            {{ item.address }}
                        </td>
                        <td>
                            {% ifequal item.address_type  1 %}

                            BTC &nbsp;&nbsp;
                            {% if settings.USE_TESTNET %}
                            <a href="{{ settings.BTC_TESTNET_EXPLORER }}/address/{{ item.address }}">查询</a>
                            {% else %}
                            <a href="{{ settings.BTC_MAINNET_EXPLORER }}/address/{{ item.address }}">查询</a>
                            {% endif %}
                            
                            {% endifequal %}

                            {% ifequal item.address_type  2 %}

                            ELA &nbsp;&nbsp;
                            {% if settings.USE_TESTNET %}
                            <a href="{{ settings.ELA_TESTNET_EXPLORER }}/address/{{ item.address }}">查询</a>
                            {% else %}
                            <a href="{{ settings.ELA_MAINNET_EXPLORER }}/address/{{ item.address }}">查询</a>
                            {% endif %}

                            {% endifequal %}
                        </td>
                        <td>
                            {{ item.value }}
                            {% ifequal item.address_type  1 %}
                            BTC
                            {% endifequal %}

                            {% ifequal item.address_type  2 %} 
                            ELA
                            {% endifequal %}
                        </td>
                        <td>
                            {{ item.updated_at|date:"Y-m-d H:i:s"}}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <div class="form-container">
                {% if is_paginated %}
                <div class="pagination-simple">
                {% if page_obj.has_previous %}
                    <a href="?page={{ page_obj.previous_page_number }}">{% trans "previous" %}</a>
                {% endif %}
                <span class="current">{{ page_obj.number }}/{{ paginator.num_pages }}</span>
                {% if page_obj.has_next %}
                    <a href="?page={{ page_obj.next_page_number }}">{% trans "next" %}</a>
                {% endif %}
                </div>
                {% endif %}
            </div>
            {% if not items %}
            <div class="well text-center">
                还没有数据
            </div>
            {% endif %}
        </div>
    </div>
</section>

{% endblock %}
{% block inline_js %}
{% endblock %}
