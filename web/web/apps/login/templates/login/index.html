{% extends "base.html" %} 
{% load i18n %}
{% load utils %}
{% block title %} {% trans "Login" %} {% endblock %}
{% block site_name %} {% trans "Newton Community" %} {% endblock %}
{% block header %}
{% include "header-no-menu.html" %}
{% endblock %}

{% block require_js %}
{% if captcha_service_type == "google" %}
<script src="https://www.google.com/recaptcha/api.js" async defer></script>
{% endif %}
{% if captcha_service_type == "tencent" %}
<script type="text/javascript" src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
{% endif %}
{% endblock %}

{% block notice %}
{% endblock %}

{% block content %}
<section id="login" class="section-list login">
	<div class="page-title">
		<div class="container">
			<p>{% trans "Login" %}
			</p>
		</div>
	</div>
    <div class="container">
        <div class="form-container">
            <form action="/login/post/" method="POST" id="id_login_form">
                {% csrf_token %}
                {% include "form.html" %}
                {% include "captcha.html" with captcha_service_type=captcha_service_type %}
                <div>
                    <input type="hidden" name="next" value="{{ next }}" />
                    <button class="form-button" style="color:#fff;" type="submit">{% trans "Login" %}</button>
                </div>
                <div class="space-between">
                    <a class="register" href="/register/">{% trans "Register" %}</a>
                    <a class="reset" href="/reset/">{% trans "Forgot Password?" %}</a>
                </div>
            </form>
        </div>
    </div>

    <div class="modal fade" tabindex="-1" role="dialog" id="code-modal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title text-center">{% trans "Google Authenticator Code" %}</h4>
                </div>
                <div class="modal-body text-center">
                    <div class="container">
                        <div class="modal-form-container">
                            <form id="id_google_auth_form" action="#">
                                <div class="form-group">
                                    <input id="id-gtoken" name="gtoken" />
                                </div>
                                <div>
                                    <button id="gtoken-submit-button" type="submit" style="color:#fff;" class="form-button" value="{% trans 'Submit' %}">{% trans "Submit" %}</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block inline_js %}
{% endblock %}

{% block js %}
<script src="{% version "js/captcha.js" %}" type="text/javascript"></script>
<script src="{% version "js/login.js" %}" type="text/javascript"></script>
{% endblock %}

{% block footer %}
{% include "footer-simple.html" %}
{% endblock %}

{% block css %}
<link rel="stylesheet" href="{% version "css/login.css" %}">
{% endblock %}

